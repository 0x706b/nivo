(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{Bje6:function(e,o,r){"use strict";r.d(o,"a",(function(){return k})),r.d(o,"b",(function(){return H})),r.d(o,"c",(function(){return z})),r.d(o,"d",(function(){return x})),r.d(o,"e",(function(){return m}));var t,i=r("mXGw"),n=r.n(i),l=r("5QYd"),c=r("FFEP"),a=r("q8Y+"),u=r.n(a),d=r("llhf"),s=r("fWs0"),f=r("56Mt"),m={fillDirection:"bottom",padding:1,colors:{scheme:"nivo"},emptyColor:"#cccccc",emptyOpacity:1,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},defs:[],fill:[],isInteractive:!0,legends:[],animate:l.S.animate,motionConfig:l.S.config,role:"img",pixelRatio:"undefined"!=typeof window&&null!==(t=window.devicePixelRatio)&&void 0!==t?t:1};function b(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function p(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,t)}return r}function v(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?p(Object(r),!0).forEach((function(o){b(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}var h=function(e,o,r,t,i,n,l){var c=function(e,o,r,t,i){var n=(e-(t-1)*i)/t,l=(o-(r-1)*i)/r;return Math.min(n,l)}(e,o,r,t,n),a=[];switch(i){case"top":u()(r).forEach((function(e){u()(t).forEach((function(o){a.push({position:e*t+o,row:e,column:o,x:o*(c+n),y:e*(c+n),color:l})}))}));break;case"bottom":u()(r-1,-1).forEach((function(e){u()(t).forEach((function(o){a.push({position:e*t+o,row:e,column:o,x:o*(c+n),y:e*(c+n),color:l})}))}));break;case"left":u()(t).forEach((function(e){u()(r).forEach((function(o){a.push({position:o*t+e,row:o,column:e,x:e*(c+n),y:o*(c+n),color:l})}))}));break;case"right":u()(t-1,-1).forEach((function(e){u()(r-1,-1).forEach((function(o){a.push({position:o*t+e,row:o,column:e,x:e*(c+n),y:o*(c+n),color:l})}))}));break;default:throw new Error("Invalid fill direction provided: ".concat(i))}return{cells:a,cellSize:c,origin:{x:(e-(c*t+n*(t-1)))/2,y:(o-(c*r+n*(r-1)))/2}}},g=function(e){var o=e.width,r=e.height,t=e.data,n=e.valueFormat,c=e.total,a=e.rows,u=e.columns,s=e.fillDirection,f=void 0===s?m.fillDirection:s,b=e.padding,p=void 0===b?m.padding:b,v=e.colors,g=void 0===v?m.colors:v,y=e.emptyColor,_=void 0===y?m.emptyColor:y,w=e.borderColor,j=void 0===w?m.borderColor:w,N=Object(l.sb)(n),O=Object(d.s)(g,"id"),C=Object(l.rb)(),x=Object(d.r)(j,C),E=c/(a*u),k=Object(i.useMemo)((function(){return h(o,r,a,u,f,p,_)}),[o,r,a,u,f,p,_]),S=Object(i.useMemo)((function(){var e=0;return t.map((function(o,r){var t={id:o.id,label:o.label,value:o.value,formattedValue:N(o.value),groupIndex:r,startAt:e,endAt:e+Math.round(o.value/E),color:O(o),data:o};return e=t.endAt,t}))}),[t,N,O,E]),W=Object(i.useMemo)((function(){return S.map((function(e){return{id:e.id,label:e.id,color:e.color}}))}),[S]);return{grid:k,computedData:S,legendData:W,getBorderColor:x}},y=function(e,o){return Object(i.useMemo)((function(){return console.log("merge cells data"),function(e,o){var r=e.map((function(e){return v({},e)}));return o.forEach((function(e){u()(e.startAt,e.endAt).forEach((function(o){var t=r[o];if(void 0!==t){var i=t;i.data=e,i.color=e.color}}))}),[]),r}(e,o)}),[e,o])};function _(e,o){(null==o||o>e.length)&&(o=e.length);for(var r=0,t=new Array(o);r<o;r++)t[r]=e[r];return t}function w(e,o){if(e){if("string"==typeof e)return _(e,o);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,o):void 0}}function j(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N="/Users/raph/projects/plouc/nivo/packages/waffle/src/CellsSvg.tsx",O=function(e){var o=e.cells,r=e.computedData,t=e.cellSize,c=e.origin,a=(e.borderWidth,e.getBorderColor);console.log("render");var u=y(o,r),d=Object(l.qb)(),f=d.animate,m=d.config,b=Object(i.useMemo)((function(){console.log("reverse");var e=j(u);return e.reverse(),e}),[u]),p=Object(s.e)(b,(function(e){return e.position}),{from:function(e){return{color:e.color,opacity:1,borderColor:a(e),x:e.x+c.x,y:e.y+c.y}},enter:function(e){return{color:e.color,opacity:1,borderColor:a(e),x:e.x+c.x,y:e.y+c.y}},update:function(e){return{color:e.color,opacity:1,borderColor:a(e),x:e.x+c.x,y:e.y+c.y}},leave:function(e){return{color:e.color,opacity:0,borderColor:a(e),x:e.x+c.x,y:e.y+c.y}},unique:!0,reset:!0,config:m,immediate:!f});return n.a.createElement("g",{__self:void 0,__source:{fileName:N,lineNumber:99,columnNumber:9}},p.map((function(e){e.item;var o=e.key,r=e.props;return n.a.createElement(s.a.rect,{key:o,x:r.x,y:r.y,opacity:r.opacity,width:t,height:t,fill:r.color,stroke:r.borderColor,__self:void 0,__source:{fileName:N,lineNumber:102,columnNumber:21}})})))},C="/Users/raph/projects/plouc/nivo/packages/waffle/src/Waffle.tsx",x=Object(l.tb)((function(e){var o=e.width,r=e.height,t=e.margin,a=e.data,u=e.valueFormat,d=e.total,s=e.rows,f=e.columns,b=e.fillDirection,p=void 0===b?m.fillDirection:b,v=e.padding,h=void 0===v?m.padding:v,y=e.layers,_=void 0===y?["cells","legends"]:y,w=e.colors,j=void 0===w?m.colors:w,N=e.emptyColor,x=void 0===N?m.emptyColor:N,E=e.borderWidth,k=void 0===E?m.borderWidth:E,S=e.borderColor,W=void 0===S?m.borderColor:S,D=e.legends,z=void 0===D?m.legends:D,M=e.role,A=void 0===M?m.role:M,F=Object(l.ob)(o,r,t),P=F.outerWidth,R=F.outerHeight,H=F.margin,I=F.innerWidth,U=F.innerHeight,B=g({width:I,height:U,data:a,valueFormat:u,total:d,rows:s,columns:f,fillDirection:p,padding:h,colors:j,emptyColor:x,borderColor:W}),T=B.grid,q=B.computedData,L=B.legendData,J=B.getBorderColor,V={cells:null,legends:null};return _.includes("cells")&&(V.cells=n.a.createElement(O,{key:"cells",cells:T.cells,computedData:q,cellSize:T.cellSize,origin:T.origin,borderWidth:k,getBorderColor:J,__self:void 0,__source:{fileName:C,lineNumber:61,columnNumber:13}})),_.includes("legends")&&(V.legends=n.a.createElement("g",{key:"legends",__self:void 0,__source:{fileName:C,lineNumber:75,columnNumber:13}},z.map((function(e,t){return n.a.createElement(c.j,Object.assign({key:t},e,{containerWidth:o,containerHeight:r,data:L,__self:void 0,__source:{fileName:C,lineNumber:77,columnNumber:21}}))})))),n.a.createElement(l.k,{width:P,height:R,margin:H,role:A,__self:void 0,__source:{fileName:C,lineNumber:90,columnNumber:9}},_.map((function(e,o){return void 0!==V[e]?V[e]:"function"==typeof e?n.a.createElement(i.Fragment,{key:o,__self:void 0,__source:{fileName:C,lineNumber:103,columnNumber:28}},Object(i.createElement)(e)):null})))})),E="/Users/raph/projects/plouc/nivo/packages/waffle/src/ResponsiveWaffle.tsx",k=function(e){return n.a.createElement(l.j,{__self:void 0,__source:{fileName:E,lineNumber:10,columnNumber:5}},(function(o){var r=o.width,t=o.height;return n.a.createElement(x,Object.assign({width:r,height:t},e,{__self:void 0,__source:{fileName:E,lineNumber:12,columnNumber:13}}))}))},S="/Users/raph/projects/plouc/nivo/packages/waffle/src/WaffleHtml.tsx",W=Object(l.tb)((function(e){var o=e.width,r=e.height,t=e.margin,c=e.data,a=e.valueFormat,u=e.total,d=e.rows,s=e.columns,f=e.fillDirection,b=void 0===f?m.fillDirection:f,p=e.padding,v=void 0===p?m.padding:p,h=e.layers,_=void 0===h?["cells"]:h,w=e.colors,j=void 0===w?m.colors:w,N=e.emptyColor,O=void 0===N?m.emptyColor:N,C=e.borderWidth,x=void 0===C?m.borderWidth:C,E=e.borderColor,k=void 0===E?m.borderColor:E,W=e.role,D=void 0===W?m.role:W,z=Object(l.ob)(o,r,t),M=z.outerWidth,A=z.outerHeight,F=z.margin,P=z.innerWidth,R=z.innerHeight,H=g({width:P,height:R,data:c,valueFormat:a,total:u,rows:d,columns:s,fillDirection:b,padding:v,colors:j,emptyColor:O,borderColor:k}),I=H.grid,U=H.computedData,B=H.getBorderColor,T=y(I.cells,U),q={cells:null};return _.includes("cells")&&(q.cells=n.a.createElement("div",{key:"cells",style:{position:"absolute",top:F.top+I.origin.y,left:F.left+I.origin.x},__self:void 0,__source:{fileName:S,lineNumber:57,columnNumber:13}},T.map((function(e){return n.a.createElement("div",{key:e.position,style:{position:"absolute",top:e.y,left:e.x,width:I.cellSize,height:I.cellSize,background:e.color,boxSizing:"content-box",borderStyle:"solid",borderWidth:"".concat(x,"px"),borderColor:B(e)},__self:void 0,__source:{fileName:S,lineNumber:67,columnNumber:25}})})))),n.a.createElement("div",{style:{position:"relative",width:M,height:A},role:D,__self:void 0,__source:{fileName:S,lineNumber:90,columnNumber:9}},_.map((function(e,o){return void 0!==q[e]?q[e]:"function"==typeof e?n.a.createElement(i.Fragment,{key:o,__self:void 0,__source:{fileName:S,lineNumber:104,columnNumber:28}},Object(i.createElement)(e)):null})))})),D="/Users/raph/projects/plouc/nivo/packages/waffle/src/ResponsiveWaffleHtml.tsx",z=function(e){return n.a.createElement(l.j,{__self:void 0,__source:{fileName:D,lineNumber:10,columnNumber:5}},(function(o){var r=o.width,t=o.height;return n.a.createElement(W,Object.assign({width:r,height:t},e,{__self:void 0,__source:{fileName:D,lineNumber:12,columnNumber:13}}))}))};function M(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,o){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],t=!0,i=!1,n=void 0;try{for(var l,c=e[Symbol.iterator]();!(t=(l=c.next()).done)&&(r.push(l.value),!o||r.length!==o);t=!0);}catch(a){i=!0,n=a}finally{try{t||null==c.return||c.return()}finally{if(i)throw n}}return r}}(e,o)||w(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){var o=e.cell;return n.a.createElement(f.a,{id:o.data.label,value:o.data.formattedValue,enableChip:!0,color:o.data.color,__self:void 0,__source:{fileName:"/Users/raph/projects/plouc/nivo/packages/waffle/src/CellTooltip.tsx",lineNumber:10,columnNumber:5}})},F=function(e,o,r,t,i,n,c){return e.find((function(e){return Object(l.N)(e.x+t.x+i.left,e.y+t.y+i.top,o+r,o+r,n,c)}))},P=Object(l.tb)((function(e){var o=e.width,r=e.height,t=e.margin,a=e.data,u=e.valueFormat,d=e.total,s=e.rows,b=e.columns,p=e.fillDirection,h=void 0===p?m.fillDirection:p,_=e.padding,w=void 0===_?m.padding:_,j=e.colors,N=void 0===j?m.colors:j,O=e.emptyColor,C=void 0===O?m.emptyColor:O,x=e.borderWidth,E=void 0===x?m.borderWidth:x,k=e.borderColor,S=void 0===k?m.borderColor:k,W=e.isInteractive,D=void 0===W?m.isInteractive:W,z=e.onMouseMove,P=e.onClick,R=e.tooltip,H=void 0===R?A:R,I=e.legends,U=void 0===I?m.legends:I,B=e.role,T=void 0===B?m.role:B,q=e.pixelRatio,L=void 0===q?m.pixelRatio:q,J=Object(i.useRef)(null),V=Object(l.rb)(),Y=Object(l.ob)(o,r,t),G=Y.outerWidth,Q=Y.outerHeight,X=Y.margin,$=Y.innerWidth,K=Y.innerHeight,Z=g({width:$,height:K,data:a,valueFormat:u,total:d,rows:s,columns:b,fillDirection:h,padding:w,colors:N,emptyColor:C,borderColor:S}),ee=Z.grid,oe=Z.computedData,re=Z.legendData,te=Z.getBorderColor,ie=y(ee.cells,oe);Object(i.useEffect)((function(){if(J.current){J.current.width=G*L,J.current.height=Q*L;var e=J.current.getContext("2d");e.scale(L,L),e.fillStyle=V.background,e.fillRect(0,0,G,Q),e.translate(X.left,X.top),ie.forEach((function(o){e.save(),e.fillStyle=o.color,e.fillRect(o.x+ee.origin.x,o.y+ee.origin.y,ee.cellSize,ee.cellSize),E>0&&(e.strokeStyle=te(o),e.lineWidth=E,e.strokeRect(o.x+ee.origin.x,o.y+ee.origin.y,ee.cellSize,ee.cellSize)),e.restore()})),U.forEach((function(o){Object(c.q)(e,v(v({},o),{},{data:re,containerWidth:G,containerHeight:Q,theme:V}))}))}}),[J,L,V,G,Q,X,U,re,ie,ee,E,te]);var ne=Object(i.useCallback)((function(e){if(P){var o=M(Object(l.L)(J.current,e),2),r=o[0],t=o[1],i=F(ie,ee.cellSize,w,ee.origin,X,r,t);i&&P(i,e)}}),[J,ie,ee.origin,ee.cellSize,w,X]),le=Object(f.h)(),ce=le.showTooltipFromEvent,ae=le.hideTooltip,ue=H,de=Object(i.useCallback)((function(e){var o=M(Object(l.L)(J.current,e),2),r=o[0],t=o[1],n=F(ie,ee.cellSize,w,ee.origin,X,r,t);n&&function(e){return void 0!==e.data}(n)?ce(Object(i.createElement)(ue,{cell:n}),e):ae(),n&&(null==z||z(n,e))}),[J,ie,ee.origin,ee.cellSize,w,X,ce,ae,ue,z]),se=Object(i.useCallback)((function(){ae()}),[ae]);return n.a.createElement("canvas",{ref:J,width:G*L,height:Q*L,style:{width:G,height:Q,cursor:D?"auto":"normal"},onMouseEnter:D?de:void 0,onMouseMove:D?de:void 0,onMouseLeave:D?se:void 0,onClick:D?ne:void 0,role:T,__self:void 0,__source:{fileName:"/Users/raph/projects/plouc/nivo/packages/waffle/src/WaffleCanvas.tsx",lineNumber:231,columnNumber:9}})})),R="/Users/raph/projects/plouc/nivo/packages/waffle/src/ResponsiveWaffleCanvas.tsx",H=function(e){return n.a.createElement(l.j,{__self:void 0,__source:{fileName:R,lineNumber:10,columnNumber:5}},(function(o){var r=o.width,t=o.height;return n.a.createElement(P,Object.assign({width:r,height:t},e,{__self:void 0,__source:{fileName:R,lineNumber:12,columnNumber:13}}))}))}}}]);
//# sourceMappingURL=638c3b18840322299908ff491e302aba29258b71-5f7a06de225aaf7cfa03.js.map